# 델리게이트(Delegate) & 이벤트(Event)

델리게이트 : 함수의 주소를 가르키는 참조타입 변수, 대리자 인스턴스를 통해 함수를 호출 가능

반환형과 매개변수가 모두 일치하는 함수를 할당 받음.

- delegate 반환형 델리게이트이름(매개변수);

## 일반화 델리게이트
- Func<매개변수1, 매개변수2,... ,반환형>
- Action<매개변수1, ... 매개변수n>
  
  반환형이 있다면 Func, 없다면 Action 을 쓴다.  
  반환형과 매개변수로 받을 메서드를 구분함

  + 델리게이트 체인 : 하나의 델리게이트가 여러개의 메서드를 다룰 수 있음.        
변수와는 다르게 여러 함수를 받을 수 있다.

### 콜백 함수
델리게이트를 이용해 특정 조건에서 반응하는 함수를 구현하는것  
함수의 호출이 아닌 역으로 호출을 받을때 반응을 참조하여 역 호출(CallBack)

- EX1) 게임에서 상호작용 키를 눌렀을 때 앞에 문이 있다면  문을 열고 사람이 있다면 대화를 하는 식으로 구현할 수 있으며 문을 열수 있는 대화를 할 수 있는 Can 관계니 인터페이스도 붙여 줄 수 있다.
- EX2) 키 조작법 변경시 해당 키를 눌렀을때의 반응 콜백함수에 내용을 바꾸는것으로 키 할당 내용을 변경할 수 있다.
- EX3) 2D 격투게임에서 거리에 따라 같은 키를 눌렀지만 다른 기술이 나가는 경우
- 추상화는  Call 했을때, 콜백은 CallBack 했을때 반응이 달라지는 것 

### 지정자
델리게이트를 사용해 미완성 상태의 함수를 구성한다.  
매개변수로 전달한 지정자를 기준으로 함수를 완성해 동작시킴.  
기준을 정해주는 것으로 다양한 결과가 나올 수 있는 함수를 구성한다.

## 이벤트
델리게이트를 사용해 구현하며 객체간의 유연한 통신을 위한 패턴이다.  
사건이 발생했다는 사실을 다른 객체에 전달  
델리게이트의 일부 기능을 제한하여 이벤트의 용도로 사용함

### 델리게이트를 그대로 이벤트로 쓰면 문제점
- 이벤트에 등록하려면 public 일 수 밖에 없다.
- 대입 연산을 통해 기존 반응한 객체들이 사라질 수 있다.
- 외부에서 이벤트를 발생시켜 의도치 않은 반응이 나올 수 있다.

### 이벤트를 사용한 해결책
- public event Action EventAction; // 델리게이트에 event 키워드를 붙인다.
- 대입 연산이 불가해져 기존의 반응할 객체들이 사라지는것을 방지함.
- 외부에서 이벤트 발생을 금지시켜 의도치 않은 외부 사용이 금지됨.

장점 : 개방폐쇄의 원칙이 지켜지며, 불필요한 연산을 필요로 하지 않음  
단점 : 이벤트를 구성하기 위한 추가적인 소스를 작성해야함








    

